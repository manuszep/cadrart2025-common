---
# Production services (dynamically point to current production environment)
apiVersion: v1
kind: Service
metadata:
  name: frontend-production
  namespace: cadrart-system
  labels:
    app: frontend
    purpose: production
spec:
  type: ExternalName
  externalName: frontend.cadrart-a.svc.cluster.local # Initially points to env A
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: 8080
---
apiVersion: v1
kind: Service
metadata:
  name: backend-production
  namespace: cadrart-system
  labels:
    app: backend
    purpose: production
spec:
  type: ExternalName
  externalName: backend.cadrart-a.svc.cluster.local # Initially points to env A
  ports:
    - name: http
      port: 3000
      protocol: TCP
      targetPort: 3000
    - name: ws
      port: 8001
      protocol: TCP
      targetPort: 8001
---
# Staging services (dynamically point to current staging environment)
apiVersion: v1
kind: Service
metadata:
  name: frontend-staging
  namespace: cadrart-system
  labels:
    app: frontend
    purpose: staging
spec:
  type: ExternalName
  externalName: frontend.cadrart-b.svc.cluster.local # Initially points to env B
  ports:
    - name: http
      port: 8080
      protocol: TCP
      targetPort: 8080
---
apiVersion: v1
kind: Service
metadata:
  name: backend-staging
  namespace: cadrart-system
  labels:
    app: backend
    purpose: staging
spec:
  type: ExternalName
  externalName: backend.cadrart-b.svc.cluster.local # Initially points to env B
  ports:
    - name: http
      port: 3000
      protocol: TCP
      targetPort: 3000
    - name: ws
      port: 8001
      protocol: TCP
      targetPort: 8001
